syntax = "proto3";

option csharp_namespace = "GrpcService";

package bezique;

service Bezique{
    rpc StartGame (PlayerCount) returns (GameStarted);
    rpc DealCard (DealCardRequest) returns (DealCardResponse);
    rpc GetGameState (GameStateRequest) returns (GameState);
    rpc PlayCard (PlayCardRequest) returns (PlayCardResponse);
}

message PlayerCount{
    int32 playerCount = 1;
}

message GameStarted{
    string gameStartMessage = 1;
    int32 gameId = 2;
}

message DealCardRequest {
    int32 gameId = 1;
}

message DealCardResponse{
    int32 playerIndex = 1;
    repeated Card cards = 2;
    string currentState = 3;
    bool dealingComplete = 4;
    int32 currentRound = 5;
    int32 totalRounds = 6;
    int32 gameId = 7;
}

message Card {
    int32 id = 1; 
    int32 value = 2;    
    int32 deck = 3;    
}

message GameState{
    int32 currentPlayerIndex = 1;
    string currentState = 2;
    repeated PlayerHand players = 3;
    int32 gameId = 4;
}

message PlayerHand {
    int32 playerIndex = 1;
    repeated Card cards = 2;
}

message GameStateRequest {
    int32 gameId = 1;
}

message PlayCardRequest {
    int32 gameId = 1;
    int32 playerIndex = 2;
    int32 cardId = 3;
}

message PlayCardResponse {
    bool success = 1;
    string message = 2;
    int32 nextPlayerIndex = 3;
    string gameState = 4;
    int32 gameId = 5;
}